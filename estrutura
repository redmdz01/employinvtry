-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.carnet
(
    dosis integer,
    fecha date,
    tipo character varying COLLATE pg_catalog."default",
    cedula character(10) COLLATE pg_catalog."default",
    id integer NOT NULL DEFAULT nextval('carnet_id_seq'::regclass),
    CONSTRAINT carnet_pkey PRIMARY KEY (id)
)
WITH (
    OIDS = FALSE
);

COMMENT ON TABLE public.carnet
    IS 'carnet de vacunacion de empleados';

CREATE TABLE IF NOT EXISTS public.empleado
(
    cedula character(10) COLLATE pg_catalog."default" NOT NULL,
    nombre character varying COLLATE pg_catalog."default" NOT NULL,
    correo character varying COLLATE pg_catalog."default" NOT NULL,
    direccion character varying COLLATE pg_catalog."default",
    telefono character varying(10) COLLATE pg_catalog."default",
    fecha_nacimiento date,
    apellido character varying COLLATE pg_catalog."default" NOT NULL,
    vacunado character(1) COLLATE pg_catalog."default" DEFAULT 'N'::bpchar,
    CONSTRAINT empleado_pkey PRIMARY KEY (cedula)
)
WITH (
    OIDS = FALSE
);

CREATE TABLE IF NOT EXISTS public.usuario
(
    usuari character varying COLLATE pg_catalog."default" NOT NULL,
    clave character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT usuario1 PRIMARY KEY (usuari)
)
WITH (
    OIDS = FALSE
);

CREATE TABLE IF NOT EXISTS public.vacuna
(
    tipo character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT vacuna_pkey PRIMARY KEY (tipo)
)
WITH (
    OIDS = FALSE
);

ALTER TABLE IF EXISTS public.carnet
    ADD CONSTRAINT cedula FOREIGN KEY (cedula)
    REFERENCES public.empleado (cedula) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.carnet
    ADD CONSTRAINT tipo FOREIGN KEY (tipo)
    REFERENCES public.vacuna (tipo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;